<Window x:Class="DictionatiesForEverything.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DictionatiesForEverything"
        xmlns:vm="clr-namespace:DictionatiesForEverything.ViewModel"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:toolkit="http://schemas.xceed.com/wpf/xaml/toolkit"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    <Window.DataContext>
        <vm:ManageDataVM/>
    </Window.DataContext>
    <DockPanel>
        <Button Content="+" Command="{Binding OpenAddTermWindowCommand}" DockPanel.Dock="Bottom" HorizontalAlignment="Left" MinHeight="25" MinWidth="100"/>
        <Grid DockPanel.Dock="Left" MinWidth="100">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <ComboBox Grid.Row="0" ItemsSource="{Binding AllGlossaries}" Height="30" 
                      SelectedItem="{Binding SelectedGlossary, Mode=TwoWay}" MinHeight="35">
                <ComboBox.ItemTemplate>
                    <DataTemplate>
                        <Label Content="{Binding Path=Name}"></Label>
                    </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>

            <ListBox Grid.Row="1" ItemsSource="{Binding FilteredItems}" 
                     SelectedItem="{Binding SelectedGlossaryItem, Mode=TwoWay}" 
                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                     MaxHeight="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}}">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseDoubleClick">
                        <i:InvokeCommandAction Command="{Binding OpenUpdateTermWindowCommand}"
                                               CommandParameter="{Binding SelectedGlossaryItem}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Label Content="{Binding Path=Name}"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>
        <StackPanel Orientation="Vertical" DockPanel.Dock="Top">
            <StackPanel Orientation="Horizontal" MinHeight="35">
                <Button Content="Добавить глоссарий" Command="{Binding OpenAddGlossaryWindowCommand}"/>
                <Button Content="Удалить глоссарий"/>
                <StackPanel>
                    <CheckBox x:Name="CheckBoxIsCanChange" Content="Режим редактирования" />
                    <UniformGrid Rows="1" Columns="2">
                        <Button Content="Сохранить" IsEnabled="{Binding ElementName=CheckBoxIsCanChange, Path=IsChecked}" Command="{Binding ChangeDescriptionTermCommand}"/>
                        <Button Content="Удалить термин" IsEnabled="{Binding ElementName=CheckBoxIsCanChange, Path=IsChecked}" Command="{Binding DeleteTermCommand}"/>
                    </UniformGrid>
                </StackPanel>
            </StackPanel>
            <ToolBar Height="25">
                <ToggleButton Content="Ж" Width="20" IsChecked="{Binding StyleTextViaToolBar.IsBold}"/>
                <ToggleButton Content="К" Width="20"/>
                <ToggleButton Content="П" Width="20"/>
                <Separator/>
                <ComboBox ItemsSource="{Binding FontFamily}" SelectedItem="{Binding  SelectedFontFamily}" Width="100"/>
            </ToolBar>
        </StackPanel>

        <toolkit:RichTextBox Text="{Binding SelectedGlossaryItem.Description}" 
                             FontWeight="{Binding StyleTextViaToolBar.FontWeight, Mode=TwoWay}"
                             IsEnabled="{Binding ElementName=CheckBoxIsCanChangem, Path=IsChecked}"
                             DockPanel.Dock="Right">
            <toolkit:RichTextBox.TextFormatter>
                <toolkit:PlainTextFormatter />
            </toolkit:RichTextBox.TextFormatter>
        </toolkit:RichTextBox>
    </DockPanel>
</Window>
